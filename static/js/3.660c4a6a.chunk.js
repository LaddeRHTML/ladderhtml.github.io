(this["webpackJsonpmy-app-01"]=this["webpackJsonpmy-app-01"]||[]).push([[3],{290:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var s=a(96);function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],s=!0,r=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(s=(o=i.next()).done)&&(a.push(o.value),!t||a.length!==t);s=!0);}catch(c){r=!0,n=c}finally{try{s||null==i.return||i.return()}finally{if(r)throw n}}return a}}(e,t)||Object(s.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},291:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var s=a(3),r=(a(0),a(19)),n=a(11),o=a(1),i=function(e){return{isAuth:e.authReducer.isAuth}},c=function(e){return Object(r.b)(i)((function(t){return t.isAuth?Object(o.jsx)(e,Object(s.a)({},t)):Object(o.jsx)(n.a,{to:"/login"})}))}},294:function(e,t,a){e.exports={post:"post_post__15KVg",head:"post_head__LDpoy",right:"post_right__2rAAv",avatar:"post_avatar__3m-Wn",name:"post_name__2qvA2",link:"post_link__1Ai1y",message:"post_message__3u9rH",footer:"post_footer__3lim3",likes:"post_likes__axT9W",like:"post_like__3kSaN",number:"post_number__23Avk",time:"post_time__3LcKI"}},295:function(e,t,a){e.exports={posts:"posts_posts__RT5fm"}},296:function(e,t,a){e.exports={profileInfo:"profileInfo_profileInfo__3fSaH",profileInner:"profileInfo_profileInner__YMXLJ",profileFooter:"profileInfo_profileFooter__3zR4c",profileFooter__postwrite:"profileInfo_profileFooter__postwrite__295hf",backButton:"profileInfo_backButton__2PAEr",profile__addPostAvatar:"profileInfo_profile__addPostAvatar__2TDyz",profile__addPostTextarea:"profileInfo_profile__addPostTextarea__3zD7B",profileDescr:"profileInfo_profileDescr__3XFhB",profileItem:"profileInfo_profileItem__1wfj_",aboutItem:"profileInfo_aboutItem__3yL9A",aboutDescr:"profileInfo_aboutDescr__3grvf",editButton:"profileInfo_editButton__10Yru",profileHeader:"profileInfo_profileHeader__18joT",profileHeader__name:"profileInfo_profileHeader__name__3PaNT",profileHeader__status:"profileInfo_profileHeader__status__3aCJz",avatar:"profileInfo_avatar__1gR6k",avatarWrap:"profileInfo_avatarWrap__2VpOr",avatarInput:"profileInfo_avatarInput__vWL74",avatarInner:"profileInfo_avatarInner__4Y3Ul",editInfoTitle:"profileInfo_editInfoTitle__29l_3",moreInfoBtn:"profileInfo_moreInfoBtn__Ts23Q",upStage:"profileInfo_upStage__2cQ8a",downStage:"profileInfo_downStage__CyT1k",downStage_active:"profileInfo_downStage_active__iXPK6"}},298:function(e,t,a){"use strict";a.r(t);var s=a(19),r=a(11),n=a(10),o=a(88),i=a(25),c=function(e){return e.profileReducer.posts},l=function(e){return e.profileReducer.newPostText},u=function(e){return e.profileReducer.profile},d=function(e){return e.profileReducer.status},f=function(e){return e.profileReducer.editMode},j=a(291),p=a(52),m=a(53),b=a(63),_=a(62),h=a(0),O=a.n(h),v=a(21),x=a(294),I=a.n(x),N=a(1),g=function(e){var t=e.message,a=e.likes,s=e.name,r=e.avatar,n=e.id,o=e.userId;return Object(N.jsxs)("div",{id:n,className:I.a.post,children:[Object(N.jsxs)("div",{className:I.a.head,children:[Object(N.jsx)("div",{className:I.a.avatar,children:Object(N.jsx)("img",{src:null!=r?r:"https://html5css.ru/w3images/avatar2.png",alt:"myMiniAvatar"})}),Object(N.jsxs)("div",{className:I.a.right,children:[Object(N.jsx)(v.b,{className:I.a.name,to:"/profile/"+o,children:s}),Object(N.jsx)("div",{className:I.a.time,children:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u0432 13:37"})]})]}),Object(N.jsx)("div",{className:I.a.message,children:t}),Object(N.jsx)("div",{className:I.a.footer,children:Object(N.jsxs)("div",{className:I.a.likes,children:[Object(N.jsx)("button",{className:I.a.like}),Object(N.jsx)("div",{className:I.a.number,children:a})]})})]})},k=a(295),S=a.n(k),w=O.a.memo((function(e){var t=e.posts,a=e.profile,s=a.fullName,r=a.photos,n=a.userId,o=t.map((function(e){return Object(N.jsx)(g,{id:e.id,message:e.message,name:s,avatar:r.small,likes:e.likes,userId:n},e.id)}));return Object(N.jsx)("div",{className:S.a.posts,children:o})})),y=a(7),D=a.n(y),T=a(12),P=a(290),A=a(128),M=a(129),E=a(296),F=a.n(E),C=function(e){var t=e.updateStatus,a=Object(h.useState)(!1),s=Object(P.a)(a,2),r=s[0],n=s[1],o=Object(h.useState)(e.status),i=Object(P.a)(o,2),c=i[0],l=i[1];Object(h.useEffect)((function(){l(e.status)}),[e.status]);var u=function(e){n(e)};return Object(N.jsx)("div",{className:"status",children:r?Object(N.jsx)("div",{children:Object(N.jsx)("input",{autoFocus:!0,onBlur:function(){u(!1),t(c)},value:c,onChange:function(e){l(e.currentTarget.value)}})}):Object(N.jsx)("div",{onClick:function(){return u(!0)},children:Object(N.jsx)("span",{children:c||"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441"})})})},B=a(51),H=a(41),R=function(e){var t=e.contactTitle,a=e.contactValue,s=e.s;return Object(N.jsxs)("div",{className:s.profileItem,children:[Object(N.jsxs)("div",{className:s.aboutItem,children:[t,":"]}),a?Object(N.jsx)("a",{className:s.aboutDescr,href:a,rel:"noreferrer",target:"_blank",children:a}):Object(N.jsx)("div",{className:s.aboutDescr,children:"\u041f\u0443\u0441\u0442\u043e"})]})},V=function(e){var t=e.contactTitle,a=e.placeholder,s=e.name,r=e.s;return Object(N.jsxs)("div",{className:r.profileItem,children:[Object(N.jsx)("div",{className:r.aboutItem,children:t}),Object(N.jsx)(A.a,{component:H.a,placeholder:a||"\u0421\u0441\u044b\u043b\u043a\u0430",name:s,validate:[B.b]})]})},J=function(e){var t=e.item,a=e.itemDescr,s=(e.plug,e.s);return Object(N.jsxs)("div",{className:s.profileItem,children:[Object(N.jsx)("div",{className:s.aboutItem,children:a}),Object(N.jsx)("div",{className:s.aboutDescr,children:t})]})},L=function(e){var t=e.item,a=e.itemDescr,s=e.search,r=e.dontSearch,n=e.s;return Object(N.jsxs)("div",{className:n.profileItem,children:[Object(N.jsx)("div",{className:n.aboutItem,children:a}),Object(N.jsx)("div",{className:n.aboutDescr,children:t?s:r})]})},W=function(e){var t=e.itemDescr,a=e.name,s=e.placeholder,r=e.type,n=e.s;return Object(N.jsxs)("div",{className:n.profileItem,children:[Object(N.jsx)("div",{className:n.aboutItem,children:t}),Object(N.jsx)("div",{className:n.aboutDescr,children:Object(N.jsx)(A.a,{type:r?"checkbox":"input",component:H.a,placeholder:s,name:a,validate:[B.b]})})]})},z=function(e){var t=e.s,a=e.handleSubmit,s=e.profile,r=e.turnOffEditMode,n=e.isOwner;return Object(N.jsxs)("form",{onSubmit:a,className:t.profileFooter,children:[Object(N.jsxs)("div",{className:t.profileDescr,children:[Object(N.jsx)("div",{className:t.editInfoTitle,children:"\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),n?Object(N.jsx)("div",{className:t.backButton,onClick:r,children:"\u041d\u0430\u0437\u0430\u0434"}):null]}),Object(N.jsx)(W,{itemDescr:"\u041f\u043e\u043b\u043d\u043e\u0435 \u0438\u043c\u044f:",name:"fullName",placeholder:"\u041f\u043e\u043b\u043d\u043e\u0435 \u0438\u043c\u044f",s:t}),Object(N.jsx)(W,{itemDescr:"\u041e\u0431\u043e \u043c\u043d\u0435:",name:"aboutMe",placeholder:"\u041e\u0431\u043e \u043c\u043d\u0435",s:t}),Object(N.jsx)("div",{className:t.profileDescr,children:Object(N.jsx)("div",{className:t.editInfoTitle,children:"\u0420\u0430\u0431\u043e\u0447\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"})}),Object(N.jsx)(W,{itemDescr:"\u0418\u0449\u0443 \u0420\u0430\u0431\u043e\u0442\u0443:",name:"lookingForAJob",placeholder:"\u0418\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443",type:"checkbox",s:t}),Object(N.jsx)(W,{itemDescr:"\u041c\u043e\u0438 \u043d\u0430\u0432\u044b\u043a\u0438:",name:"lookingForAJobDescription",placeholder:"\u041e\u043f\u0438\u0448\u0438\u0442\u0435 \u0440\u0430\u0431\u043e\u0442\u0443",s:t}),Object(N.jsx)("div",{className:t.profileDescr,children:Object(N.jsx)("div",{className:t.editInfoTitle,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"})}),Object.keys(s.contacts).map((function(e){return Object(N.jsx)(V,{contactTitle:e,placeholder:s.contacts[e],name:"contacts."+e,s:t},e)})),Object(N.jsx)("button",{type:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})},G=z=Object(M.a)({form:"profileData"})(z),K=function(e){var t=e.profile,a=e.isOwner,s=e.goToEditMode,r=e.s,n=Object(h.useState)(!1),o=Object(P.a)(n,2),i=o[0],c=o[1],l=function(e){c(e)},u=t.fullName,d=t.aboutMe,f=t.lookingForAJob,j=t.lookingForAJobDescription;return Object(N.jsxs)("div",{className:r.profileFooter,children:[Object(N.jsxs)("div",{className:r.upStage,children:[Object(N.jsxs)("div",{className:r.profileDescr,children:[Object(N.jsx)("div",{className:r.editInfoTitle,children:"\u041e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),a?Object(N.jsx)("div",{className:r.editButton,onClick:s,children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}):null]}),Object(N.jsx)(J,{itemDescr:"\u041f\u043e\u043b\u043d\u043e\u0435 \u0438\u043c\u044f:",item:u,plug:"\u0418\u043c\u044f",s:r}),Object(N.jsx)(J,{itemDescr:"\u041e\u0431\u043e \u043c\u043d\u0435:",item:d,plug:"\u0418\u043d\u0444\u044b \u043d\u0435\u0442 ;(",s:r})]}),i?Object(N.jsx)("div",{className:r.moreInfoBtn,onClick:function(){return l(!1)},children:"\u0421\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e"}):Object(N.jsx)("div",{className:r.moreInfoBtn,onClick:function(){return l(!0)},children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e"}),Object(N.jsxs)("div",{className:i?r.downStage_active:r.downStage,children:[Object(N.jsx)("div",{className:r.profileDescr,children:Object(N.jsx)("div",{className:r.editInfoTitle,children:"\u0420\u0430\u0431\u043e\u0447\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"})}),Object(N.jsx)(L,{itemDescr:"\u0418\u0449\u0443 \u0440\u0430\u0431\u043e\u0442\u0443:",item:f,search:"\u0418\u0449\u0443",dontSearch:"\u041d\u0435 \u0438\u0449\u0443",s:r}),Object(N.jsx)(J,{itemDescr:"\u041c\u043e\u0438 \u043d\u0430\u0432\u044b\u043a\u0438:",item:j,plug:"\u041d\u0435\u0442 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u044f",s:r}),Object(N.jsx)("div",{className:r.profileDescr,children:Object(N.jsx)("div",{className:r.editInfoTitle,children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"})}),Object.keys(t.contacts).map((function(e){return Object(N.jsx)(R,{contactTitle:e,contactValue:t.contacts[e],s:r},e)}))]})]})},X=function(e){var t=e.isOwner,a=e.onGetNewFile,s=e.profile,r=e.s;return Object(N.jsxs)("div",{className:r.avatarInner,children:[Object(N.jsx)("div",{className:r.avatar,children:Object(N.jsx)("img",{src:s.photos.large?s.photos.large:"https://html5css.ru/w3images/avatar2.png",alt:"myAvatar"})}),t&&Object(N.jsx)(Y,{onGetNewFile:a,s:r})]})},Y=function(e){var t=e.onGetNewFile,a=e.s;return Object(N.jsxs)("button",{className:a.avatarWrap,children:[Object(N.jsx)("input",{className:a.avatarInput,type:"file",onChange:t})," \u0412\u044b\u0431\u0430\u0442\u044c \u0444\u0430\u0439\u043b"]})};var Q=Object(B.a)(100),U=function(e){var t=e.handleSubmit,a=e.avatar,s=function(e){var t=Object(h.useState)(e),a=Object(P.a)(t,2),s=a[0],r=a[1],n=Object(h.useRef)(null),o=function(e){n.current&&!n.current.contains(e.target)&&r(!1)};return Object(h.useEffect)((function(){return document.addEventListener("click",o,!0),function(){document.removeEventListener("click",o,!0)}})),{ref:n,isComponentVisible:s,setIsComponentVisible:r}}(!1),r=s.ref,n=s.isComponentVisible,o=s.setIsComponentVisible;return Object(N.jsxs)("form",{onSubmit:t,className:F.a.profileFooter__postwrite,children:[Object(N.jsx)("div",{className:F.a.profile__addPostAvatar,children:Object(N.jsx)("img",{src:null!=a?a:"https://html5css.ru/w3images/avatar2.png",alt:"myMiniAvatar"})}),Object(N.jsxs)("div",{className:F.a.profile__addPostTextarea,ref:r,children:[Object(N.jsx)(A.a,{name:"postInput",component:H.b,type:"text",placeholder:"\u0427\u0435\u043c \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f?",validate:[B.b,Q],onClick:function(){o(!0)}}),n?Object(N.jsx)("button",{type:"sumbit",children:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"}):null]})]})};U=Object(M.a)({form:"post-form"})(U);var q=function(e){var t=e.status,a=e.statusEditMode,s=e.toggleEditModeStatus,r=e.newStatusText,n=e.updateStatus,o=e.addPost,i=e.profile,c=e.isOwner,l=e.sendPhoto,u=e.updateProfileData,d=Object(h.useState)(!1),f=Object(P.a)(d,2),j=f[0],p=f[1],m=function(){var e=Object(T.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t);case 2:p(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)("div",{className:F.a.profileInfo,children:[Object(N.jsx)(X,{isOwner:c,onGetNewFile:function(e){e.target.files.length&&l(e.target.files[0])},s:F.a,profile:i}),Object(N.jsxs)("div",{className:F.a.profileInner,children:[Object(N.jsxs)("div",{className:F.a.profileHeader,children:[Object(N.jsx)("div",{className:F.a.profileHeader__name,children:i.fullName}),Object(N.jsx)("div",{className:F.a.profileHeader__status,children:Object(N.jsx)(C,{status:t,editMode:a,toggleEditMode:s,newStatusText:r,updateStatus:n})}),j?Object(N.jsx)(G,{turnOffEditMode:function(){return p(!1)},initialValues:i,s:F.a,onSubmit:m,profile:i,isOwner:c}):Object(N.jsx)(K,{goToEditMode:function(){return p(!0)},isOwner:c,profile:i,s:F.a})]}),Object(N.jsx)(U,{onSubmit:function(e){o(e.postInput)},avatar:i.photos.small})]})]})},Z=a(126),$=function(e){Object(b.a)(a,e);var t=Object(_.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"refreshProfile",value:function(){var e=this.props,t=e.setProfile,a=e.setStatus,s=e.match.params.userId;s||(s=e.userId),t(s),a(s)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){var e=this.props,t=e.addPost,a=e.changePostText,s=e.newPostText,n=e.profile,o=e.posts,i=e.match,c=e.sendPhoto,l=e.updateProfileData,u=e.userId,d=e.status,f=e.editMode,j=e.toggleEditMode,p=e.newStatusText,m=e.updateStatus,b=!i.params.userId;return n?(console.log(u,n.userId),+i.params.userId===u?Object(N.jsx)(r.a,{to:"/profile/"}):Object(N.jsxs)("div",{children:[Object(N.jsx)(q,{updateProfileData:l,sendPhoto:c,isOwner:b,addPost:t,changePostText:a,newPostText:s,profile:n,status:d,statusEditMode:f,toggleEditModeStatus:j,newStatusText:p,updateStatus:m}),b?Object(N.jsx)(w,{posts:o,profile:n}):null]})):Object(N.jsx)(Z.a,{})}}]),a}(h.Component);t.default=Object(n.d)(Object(s.b)((function(e){return{posts:c(e),newPostText:l(e),profile:u(e),status:d(e),editMode:f(e),isAuth:Object(i.b)(e),userId:Object(i.e)(e)}}),{addPost:o.b,changePostText:o.c,getProfile:o.d,toggleEditMode:o.j,newStatusText:o.e,setProfile:o.h,setStatus:o.i,updateStatus:o.l,sendPhoto:o.g,updateProfileData:o.k}),r.g,j.a)($)}}]);
//# sourceMappingURL=3.660c4a6a.chunk.js.map